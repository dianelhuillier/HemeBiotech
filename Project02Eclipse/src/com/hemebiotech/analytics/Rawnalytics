package com.hemebiotech.analytics;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class AnalyticsCounter {

	
	public static void main(String args[]) throws Exception {
		// la version laborieuse
		int headacheCount = 0;
		int rashCount = 0;
		int dialatedPupilCount = 0;
		/*
		 * int anxietyCount = 0; int feverCount = 0; int dryMouthCount = 0; int
		 * inflamationCount = 0; int stomachPainCount = 0; int highBloodPressureCount =
		 * 0; int stiffNeckCount; int coughCount; int insomniaCount; int
		 * constrictedPupilsCount; int nauseaCount; int shortnessOfBreathCount; int
		 * blurredVisionCount; int dizzinessCount; int lowBloodPressureCount; int
		 * arrhythmiasCount; int waterRetentionCount; int blindnessCount; int
		 * rapidHeartRateCount; int counts = 0;
		 */
		


		HashMap<String, Integer> results = new HashMap<String, Integer>();

		//création d'un objet de type SymptomReader
		ISymptomReader iSymptomReader = new ReadSymptomDataFromFile("symptoms.txt");
		
		//recupération de la liste d esymptomes
		List<String> listeDeSymptoms = iSymptomReader.getSymptoms();
		
		for (int i=0; i<listeDeSymptoms.size(); i++) { 
			
			//	 System.out.println(listeDeSymptoms.get(i)); 
		
			 //test si le symptome est déja référencé
			 if (results.containsKey(listeDeSymptoms.get(i))){
				 
				 int count = 0;
					count=results.get(listeDeSymptoms.get(i));
					count++;
					results.put(listeDeSymptoms.get(i), count);
					
				}else {
				//	System.out.println("il n'existe pas");
					results.put(listeDeSymptoms.get(i), 1);
				}
			 
		}
		
/*		//lecture du fichier txt ligne par ligne
		try(BufferedReader bufferedReader = new BufferedReader(new FileReader("symptoms.txt"))){
			
		String line = null;
		String countMap = null;
		while((line = bufferedReader.readLine()) !=null) {

			results.put(line, countMap);
	        System.out.println(line);
	        System.out.println(countMap);
	        


			
			//je garde pour check les variables
			if (line.equals("headache")) {
				headacheCount++;
			}
			if (line.equals("rash")) { //pas rush
				rashCount++;
			}
			if (line.contains("dialated pupils")) {
				dialatedPupilCount++;
			}
			if (line.equals("anxiety")) {
				anxietyCount++;
			}
			if (line.equals("fever")) {
				feverCount++;
			}
			if (line.contains("dry mouth")) {
				dryMouthCount++;
			}
			if (line.equals("inflamation")) {
				inflamationCount++;
			}
			


}


        
        */
		// next generate output fonctionnel
		try {
		PrintWriter writer = new PrintWriter("results.txt", "UTF-8");
		writer.println(results);
		writer.close();
	 }catch (IOException e) {
		e.printStackTrace();
		}
		
	}
}




//autre tentative decompte
//for (String string : count) {
//	Integer previousAmount = results.get(string);
//	if(previousAmount == null) 
//		results.put(string, 1); 
//	else
//	results.put(string, previousAmount + 1);

//}
